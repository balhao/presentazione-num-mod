import{r as K,L as Q,O as V,f as Z,o as tt}from"./modules/vue-spw53VNv.js";import{u as nt}from"./slidev/context-DTAgYDvm.js";import{_ as ot}from"./index-BuEbwpAB.js";const _=980,x=552,et=10,st=28,ct=8/3,at=.5,lt=212,rt=96,it=78,T=20,y=18,$=1.8,dt={__name:"LorenzBackground",props:{trailLength:{type:Number,default:1e4},speed:{type:Number,default:100},dt:{type:Number,default:.001}},setup(A){nt();const d=A,k=K(null);let b=null,t=null,l=.1,r=0,u=0,o=0,n=null,f=0,e=0;const M=-Math.PI/2,P=Math.cos(M),I=Math.sin(M),w=_/2,B=x*1.2;function E(){l=.1,r=0,u=0,o=d.trailLength,n=new Float32Array(o*3),f=0,e=0}function F(s,c,g){const p=f*3;n[p]=s,n[p+1]=c,n[p+2]=g,f=(f+1)%o,e<o&&e++}return Q(()=>{const s=k.value;if(!s)return;const c=2;s.width=_*c,s.height=x*c,t=s.getContext("2d"),t.setTransform(c,0,0,c,0,0),E(),t.fillStyle="rgba(251, 252, 255, 1)",t.fillRect(0,0,_,x);function g(){const a=et*(r-l)*d.dt,m=(l*(st-u)-r)*d.dt,i=(l*r-ct*u)*d.dt;l+=a,r+=m,u+=i,F(l,r,u)}function p(){if(t.fillStyle="rgba(251, 252, 255, 0.05)",t.fillRect(0,0,_,x),e<2)return;t.lineWidth=1.5,t.lineCap="round";const a=e<o?0:f,m=Math.ceil(e/T);for(let i=0;i<T;i++){const v=i*m,L=Math.min((i+1)*m,e);if(v>=e)break;const N=(v+L)/2/o*at;t.strokeStyle=`hsla(${lt}, ${rt}%, ${it}%, ${N})`,t.beginPath();for(let h=v+1;h<L;h++){const z=(a+h-1)%o*3,S=(a+h)%o*3,R=n[z],H=n[z+1],X=n[z+2],q=n[S],O=n[S+1],U=n[S+2],W=H*P-X*I,Y=O*P-U*I,j=w+R*y*$,D=B-W*y,G=w+q*y*$,J=B-Y*y;t.moveTo(j,D),t.lineTo(G,J)}t.stroke()}}function C(){for(let a=0;a<d.speed;a++)g();p(),b=requestAnimationFrame(C)}C()}),V(()=>{b&&cancelAnimationFrame(b)}),(s,c)=>(tt(),Z("canvas",{ref_key:"canvas",ref:k,class:"lorenz-canvas"},null,512))}},ht=ot(dt,[["__scopeId","data-v-5c7e7c70"]]);export{ht as _};
